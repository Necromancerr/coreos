{"ignition":{"version":"2.0.0","config":{}},"storage":{"files":[{"filesystem":"root","path":"/etc/hostname","contents":{"source":"data:,CoreOS-Dev","verification":{}},"mode":272,"user":{},"group":{}},{"filesystem":"root","path":"/home/core/.bashrc","contents":{"source":"data:,.%20%2Fusr%2Fshare%2Fskel%2F.bashrc%0Aalias%20ll%3D%22ls%20-l%22%0A","verification":{}},"mode":420,"user":{"id":500},"group":{"id":501}},{"filesystem":"root","path":"/opt/bin/create-network-environment.sh","contents":{"source":"data:,%23!%2Fbin%2Fsh%0Auntil%20ping%20-c1%20www.github.com%3B%20do%20sleep%202%3B%20done%0Aifconfig%20%7C%20awk%20'BEGIN%7Bn%3D0%7D%20match(%240%2C%20%2F%5E(%5Ba-zA-Z0-9%5D%2B)%3A%2F%2C%20a)%20%7B%20i%3Da%5B1%5D%3B%20e%3Dmatch(%240%2C%20%2FRUNNING%2F)%3B%20n%3Dn%2B1%20%7D%20match(%240%2C%20%2F%5E%20%2Binet%20(%5B0-9.%5D%2B)%2F%2C%20a)%20%7B%20ip%3Da%5B1%5D%3B%20if(n%3D%3D1)%20%7B%20print%20%22DEFAULT_IPV4%3D%22%20ip%20%7D%3B%20print%20toupper(i)%20%22_IPV4%3D%22%20ip%20%7D'%20%3E%20%2Fetc%2Fnetwork-environment%0A","verification":{}},"mode":448,"user":{"id":500},"group":{"id":501}},{"filesystem":"root","path":"/opt/bin/install_docker-compose.sh","contents":{"source":"data:,%23!%2Fbin%2Fsh%0Auntil%20ping%20-c1%20api.github.com%3B%20do%20sleep%202%3B%20done%0Acurl%20-L%20%60curl%20-s%20https%3A%2F%2Fapi.github.com%2Frepos%2Fdocker%2Fcompose%2Freleases%2Flatest%20%7C%20jq%20-r%20'.assets%5B%5D.browser_download_url%20%7C%20select(contains(%22Linux%22)%20and%20contains(%22x86_64%22))'%60%20%3E%20%2Fopt%2Fbin%2Fdocker-compose%0Achmod%20%2Bx%20%2Fopt%2Fbin%2Fdocker-compose%0A","verification":{}},"mode":448,"user":{"id":500},"group":{"id":501}},{"filesystem":"root","path":"/etc/systemd/network/20-dhcp.network","contents":{"source":"data:,%5BMatch%5D%0AName%3Den*%0A%0A%5BNetwork%5D%0ADHCP%3Dyes%0A%0A%5BDHCP%5D%0AUseMTU%3Dtrue%0AUseDomains%3Dtrue%0AClientIdentifier%3Dmac%20%20%20%0A","verification":{}},"mode":420,"user":{"id":500},"group":{"id":501}},{"filesystem":"root","path":"/etc/coreos/update.conf","contents":{"source":"data:,%0AREBOOT_STRATEGY%3D%22off%22","verification":{}},"mode":420,"user":{},"group":{}}]},"systemd":{"units":[{"name":"update-engine.service","mask":true},{"name":"locksmithd.service","mask":true},{"name":"internet-connected.service","enable":true,"contents":"[Unit]\nDescription=Wait until network is connected to internet (and has an IP address assigned)\nRequires=network-online.target\nAfter=network-online.target\n\n[Service]\nType=oneshot\nRemainAfterExit=true\nExecStart=/bin/sh -c \"until ping -c1 api.github.com; do echo -n .; sleep 2; done\"\n    \n"},{"name":"network-environment-creation.service","enable":true,"contents":"[Unit]\nDescription=Creates an network environment file\nDocumentation=https://github.com/Cube-Earth/container-tools-coreos-setup-iso\nRequires=internet-connected.service\nAfter=internet-connected.service\n\n[Service]\nType=oneshot\nRemainAfterExit=true\nExecStart=/opt/bin/create-network-environment.sh\n      \n[Install]\nWantedBy=multi-user.target\n"},{"name":"install_docker-compose.service","enable":true,"contents":"[Unit]\nConditionFirstBoot=yes\nDescription=Installs docker-compose\nRequires=internet-connected.service\nAfter=internet-connected.service\n\n[Service]\nType=oneshot\nRemainAfterExit=true\nExecStart=/opt/bin/install_docker-compose.sh\n    \n[Install]\nWantedBy=multi-user.target\n"}]},"networkd":{},"passwd":{"users":[{"name":"core","passwordHash":"PASSWORD","sshAuthorizedKeys":["ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDJSbOpP3+8rtyoyaXjo+DQkSFpF4T7Q23zpTeCENVymPW7slPUTSOIvy2mmDJa0fwvI+SeDpnxL87/iiyZnLZLKRliVnCUs8iISp9aDrYigcyZc4AGA1c3BWm5DooH7oABvwtsrEPv5zpBTWwIybDA86PmV0hoMxgGsVMUdcxLkoVEkZqanjrcB1ntR2ILLH3U/s1+M6NdUWqyF0ga0WGLlcs/wMi4BgNqcGLOx+hGjtUu45Bq3Tr0waM1n4MCsf4HPntsgzBiFDfWzNmcR0gV4vIVb0graWoCoh695jjrRwJXsBNMU0Kjj6b8h+Y/vU19walDMnmDInpRgRSbBBxZzKvyTCKUvwq2LWKhfaGHa9lskJgD9umZTS7TuppRlSlxtcKX47XnVQ+BEC2mD9LGNEhljJbOTsThemL89bTcNxCS6EMtF7UqaZLvHUXW0g2jxIEh9ovOSce/syEFw7lEmVD8NpJmR/jkAAbSYb6uZdj/xX85Uifh0JlqNiU+DgKhjpKN8M+C4gHDEqiS7km2SFDrmhz58VLkmwJXGT9RNyq8b7D48YUmvZDpMxiO3O1Ewg4HjetuvhYlHmgcpE5WvDn9WKC8onEjPosaNT5yQiOeuX0Nh0PlgcdLLb/KtBK3Hzx9BRmrCDMK00/tJkFVQm2IrZ/aEW+Te1xVeNDxnQ== joerg@matrix"]}]}}